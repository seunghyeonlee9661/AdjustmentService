# ğŸ“Š ì •ì‚° ì‹œìŠ¤í…œ

## ğŸ“„ í”„ë¡œì íŠ¸ ì†Œê°œ
**AdjustmentService API**ëŠ” ì˜ìƒ, ê´‘ê³  ì—…ë¡œë“œ ë° ì¡°íšŒìˆ˜ ê¸°ë°˜ ìˆ˜ìµ ì •ì‚° í†µê³„ë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ì˜ APIì…ë‹ˆë‹¤. í•´ë‹¹ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê³ ì í•©ë‹ˆë‹¤
- **ìˆ˜ìµ ì •ì‚° í†µê³„ ì œê³µ**: ì˜ìƒ ë° ê´‘ê³  ì¡°íšŒìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜ìµì„ ìë™ ê³„ì‚°í•˜ì—¬ í†µê³„ ë°ì´í„°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
- **ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ êµ¬í˜„**: `Spring Boot`, `Docker Compose`, `Eureka`, `Gateway`ë¥¼ í™œìš©í•´ íš¨ìœ¨ì ì¸ ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.
- **ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ ì²˜ë¦¬ ë° ì„±ëŠ¥ ì¸¡ì •**: `Spring Batch`ì™€ `JMeter`ë¥¼ í™œìš©í•˜ì—¬ ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ì„ ì²˜ë¦¬í•˜ê³  ì„±ëŠ¥ì„ ì¸¡ì •í•©ë‹ˆë‹¤.
- **CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•**: `Github Actions`ë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™í™”ëœ ë¹Œë“œ ë° ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
- **API ìë™ ë¬¸ì„œí™”**: `Swagger`ë¥¼ í™œìš©í•˜ì—¬ API ëª…ì„¸ì„œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê³  íŒ€ ê°„ í˜‘ì—…ì„ ì§€ì›í•©ë‹ˆë‹¤.

## ğŸ› ï¸ ê¸°ìˆ  ì˜ì‚¬ ê²°ì •
![image](https://github.com/user-attachments/assets/1a3288eb-76ff-4bc2-8683-abeaeaad964f)
### ì£¼ìš” ê¸°ìˆ  ìŠ¤íƒ
| **ê¸°ìˆ **                          | **ì„¤ëª…**                                                                                                                                           |
|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------|
| **Spring Boot**                  | ë¹ ë¥¸ ê°œë°œê³¼ ê°„ë‹¨í•œ ì„¤ì •, ë‹¤ì–‘í•œ ì—°ê³„ ê¸°ìˆ  í™œìš© ê°€ëŠ¥                                                                                                          |
| **Spring Eureka**                | ë¶„ì‚° í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ ê°„ì˜ **ìë™ ë“±ë¡**ê³¼ **íƒìƒ‰**ì„ ì œê³µ                                                                                                  |
| **Spring Gateway**               | ì„œë¹„ìŠ¤ ê°„ **ë¼ìš°íŒ…, ë¡œë“œ ë°¸ëŸ°ì‹±** ë“±ì„ ì²˜ë¦¬í•˜ëŠ” **API Gateway**ë¡œ í™œìš©                                                                                           |
| **Spring Batch**                 | ë³µì¡í•œ ì—°ì‚°ì„ ë¯¸ë¦¬ ì²˜ë¦¬í•˜ì—¬ **ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ì— ëŒ€ë¹„**                                                                                                          |
| **Docker Compose**               | ë¶„ì‚°ëœ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ **ì»¨í…Œì´ë„ˆë¡œ ê´€ë¦¬**í•˜ê³  **CI/CDì™€ ì‰½ê²Œ í†µí•©**                                                                                             |
| **Swagger**                      | **API ëª…ì„¸**ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê³  ê´€ë¦¬                                                                                                                   |
| **Github Actions**               | CI/CDë¥¼ í†µí•œ **ë¹Œë“œì™€ ë°°í¬ì˜ ìë™í™”**                                                                                                                   |
| **Nginx**                        | í”„ë¡œì íŠ¸ë“¤ì„ êµ¬ë¶„í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” **ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„œë²„**ë¡œ ì‚¬ìš©                                                                                                  |
#### 1. **Spring Eureka + Spring Gateway**
- **Eureka**ëŠ” ì„œë¹„ìŠ¤ì˜ **ìë™ íƒìƒ‰ê³¼ ë“±ë¡**ì„, **Gateway**ëŠ” ì™¸ë¶€ ìš”ì²­ì— ëŒ€í•´ **ë¼ìš°íŒ…**ì„ ê´€ë¦¬
- **Eureka ì„œë²„**ì˜ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ **ì „ì²´ ì„œë¹„ìŠ¤ë¡œ ì „íŒŒ** ê°€ëŠ¥

#### 2. **Spring Batch > Apache Camel**
- **Spring Batch**ëŠ” **ëŒ€ê·œëª¨ ë°°ì¹˜ ì²˜ë¦¬**ì™€ ëŒ€ëŸ‰ ë°ì´í„°ì˜ **ì¼ê´„ ì²˜ë¦¬ ì‘ì—…**ì—ì„œ ë›°ì–´ë‚¨
- **Apache Camel**ì€ ì‹¤ì‹œê°„ **ë©”ì‹œì§•ê³¼ ë¼ìš°íŒ…**ì— ê°•ì ì„ ê°€ì§
- **íŠ¸ëœì­ì…˜ ê´€ë¦¬ì™€ ëŒ€ëŸ‰ ë°°ì¹˜ ì²˜ë¦¬**ë¥¼ ìœ„í•´ **Spring Batch** ì„ íƒ

#### 3. **Docker Compose > Kubernetes**
- ì‘ì€ ê·œëª¨ì˜ í”„ë¡œì íŠ¸ì—ì„œ **Docker Compose**ë¥¼ í†µí•´ ë¹ ë¥´ê³  ê°„í¸í•˜ê²Œ ê°œë°œ ê°€ëŠ¥
- **Kubernetes**ëŠ” **ê³ ê°€ìš©ì„±ê³¼ ëŒ€ê·œëª¨ ë°°í¬**ì— ìœ ìš©í•˜ì§€ë§Œ **ì„¤ì •ì´ ë³µì¡í•˜ê³  í”„ë¡œì íŠ¸ ê·œëª¨ì— ë¶€ì í•©**
- **Docker Compose**ëŠ” ë¦¬ì†ŒìŠ¤ ì†Œëª¨ê°€ ì ì–´ **ë°°í¬ì— ìœ ë¦¬**, **ì»¨í…Œì´ë„ˆ ìˆ˜ì— ë”°ë¼ ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥**

## ğŸŒŸ **ì£¼ìš” ê¸°ëŠ¥**
<aside>
  
- **ğŸ¯ íšŒì› ì„œë¹„ìŠ¤** : íšŒì›ê°€ì…, ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥
- ğŸ“½ï¸ **ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤** : ë™ì˜ìƒ ì¬ìƒ, ì¡°íšŒìˆ˜ ì¦ê°€, ì¬ìƒ ì‹œê°„ ë° ì¢…ë£Œ ì‹œì  ê¸°ë¡
- â¯ï¸ **ê´‘ê³  ì¬ìƒ** : ë™ì˜ìƒì— ë“±ë¡ëœ ê´‘ê³  ì¬ìƒ, ê´‘ê³  ì¡°íšŒìˆ˜ ì¦ê°€
- ğŸ“Š **í†µê³„ ë° ì •ì‚°** : ë™ì˜ìƒê³¼ ê´‘ê³  ì¡°íšŒìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ **ì¼ê°„, ì£¼ê°„, ì›”ê°„** ì •ì‚° ê¸ˆì•¡ ì‚°ì •

</aside>

## ğŸ—‚ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°
<details>
<summary>File Structure</summary>
<pre>
ğŸ“¦adjustment
 â”£ ğŸ“‚.github
 â”ƒ â”— ğŸ“‚workflows
 â”ƒ â”ƒ â”— ğŸ˜ºdeploy.yml
 â”£ ğŸ“‚module-adjust
 â”ƒ â”£ ğŸ“‚src
 â”ƒ â”ƒ â”£ ğŸ“‚main
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.controller
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.dto
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.entity.base
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.entity
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.repository
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.service
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚resources
 â”ƒ â”ƒ â”ƒ   â”— âš™ï¸application-profile.properties
 â”ƒ â”ƒ â”— ğŸ“‚test
 â”ƒ â”— ğŸ˜build.gradle
 â”ƒ â”— ğŸ‹Dockerfile
 â”ƒ â”— ğŸ˜settings.gradle
 â”£ ğŸ“‚module-batch
 â”ƒ â”£ ğŸ“‚src
 â”ƒ â”ƒ â”£ ğŸ“‚main
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.config
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚resources
 â”ƒ â”ƒ â”ƒ   â”— âš™ï¸application-profile.properties
 â”ƒ â”ƒ â”— ğŸ“‚test
 â”ƒ â”— ğŸ˜build.gradle
 â”ƒ â”— ğŸ‹Dockerfile
 â”ƒ â”— ğŸ˜settings.gradle
 â”£ ğŸ“‚module-common
 â”ƒ â”£ ğŸ“‚src
 â”ƒ â”ƒ â”£ ğŸ“‚main
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.config
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.dto
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.entity
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.filter
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.handler
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.repository
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.security
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.service
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚resources
 â”ƒ â”ƒ â”ƒ   â”— âš™ï¸application.properties
 â”ƒ â”ƒ â”— ğŸ“‚test
 â”ƒ â”— ğŸ˜build.gradle
 â”£ ğŸ“‚module-eureka
 â”ƒ â”£ ğŸ“‚src
 â”ƒ â”ƒ â”£ ğŸ“‚main
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚java.com.sparta
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚resources
 â”ƒ â”ƒ â”ƒ   â”— âš™ï¸application.properties
 â”ƒ â”ƒ â”— ğŸ“‚test
 â”ƒ â”— ğŸ˜build.gradle
 â”ƒ â”— ğŸ‹Dockerfile
 â”ƒ â”— ğŸ˜settings.gradle
 â”ƒ ğŸ“‚module-gateway
 â”ƒ â”£ ğŸ“‚src
 â”ƒ â”ƒ â”£ ğŸ“‚main
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚resources
 â”ƒ â”ƒ â”ƒ â”ƒ â”— âš™ï¸application.properties
 â”ƒ â”£ ğŸ˜build.gradle
 â”ƒ â”£ ğŸ‹Dockerfile
 â”ƒ â”— âš™ï¸settings.gradle
 â”£ ğŸ“‚module-user
 â”ƒ â”£ ğŸ“‚src
 â”ƒ â”ƒ â”£ ğŸ“‚main
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.controller
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.service
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚resources
 â”ƒ â”ƒ â”ƒ   â”— âš™ï¸application-profile.properties
 â”ƒ â”— ğŸ˜build.gradle
 â”ƒ â”— ğŸ‹Dockerfile
 â”ƒ â”— ğŸ˜settings.gradle
 â”£ ğŸ“‚module-video
 â”ƒ â”£ ğŸ“‚src
 â”ƒ â”ƒ â”£ ğŸ“‚main
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.controller
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚java.com.sparta.service
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚resources
 â”ƒ â”ƒ â”ƒ   â”— âš™ï¸application-profile.properties
 â”ƒ â”— ğŸ˜build.gradle
 â”ƒ â”— ğŸ‹Dockerfile
 â”ƒ â”— ğŸ˜settings.gradle
 â”£ ğŸ˜build.gradle
 â”£ ğŸ‹docker-compose.yml
 â”— ğŸ˜settings.gradle 
</pre>
</details>

### ëª¨ë“ˆë³„ ì„¤ëª…
| ëª¨ë“ˆ ì´ë¦„        | ì„¤ëª…                                                            |
|------------------|-----------------------------------------------------------------|
| **adjust** | ì •ì‚° ê³¼ì •ì„ ì´í–‰í•˜ê³  ì´ì— ëŒ€í•´ ê²°ê³¼ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê³  ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì˜ ëª¨ë“ˆ. |
| **batch**  | ê° ì •ì‚° ê³¼ì •ì„ íŠ¹ì •í•œ ì‹œê°„ì— ì´í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•œ batch ëª¨ë“ˆ. |
| **common** | ëª¨ë“  ëª¨ë“ˆì— ê³µí†µì ìœ¼ë¡œ ì ìš©ë˜ëŠ” ê¸°ëŠ¥(ì¸ì¦, ì¸ê°€, ë ˆë””ìŠ¤, í•¸ë“¤ëŸ¬)ì„ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆ. |
| **eureka** | ê° ëª¨ë“ˆì— ëŒ€í•´ ìœ ë ˆì¹´ í´ë¼ìš°ë“œì˜ ì„œë²„ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ëª¨ë“ˆ. |
| **gateway**| ëª¨ë“  ëª¨ë“ˆ ê°„ì˜ ìš”ì²­ì„ ë¼ìš°íŒ…í•˜ê³  API Gateway ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆ. |
| **user**   | ì‚¬ìš©ì ë¡œê·¸ì¸ ë° ê°œì¸ ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ê¸°ëŠ¥ ëª¨ë“ˆ.              |
| **video**  | ì˜ìƒ ë° ê´‘ê³ ë¥¼ ì—…ë¡œë“œí•˜ê³  ì´ë¥¼ ì¬ìƒ ë° ì˜ìƒ ì‹œì²­ ì‹œì ì„ ê¸°ë¡í•˜ëŠ” ê¸°ëŠ¥ ëª¨ë“ˆ. |

## ğŸ¤” Troubleshooting
<details>
<summary><strong>Docker Container ì˜ìƒ ì—…ë¡œë“œ ê¸°ëŠ¥ êµ¬í˜„ì— ë”°ë¥¸ ë¬¸ì œ ë°œìƒ</strong></summary>
   
   ğŸ’¡ **ë¬¸ì œ** : Docker Containerì—ì„œ ì˜ìƒ ì—…ë¡œë“œ ê¸°ëŠ¥ êµ¬í˜„ì„ í–ˆì§€ë§Œ **ì—…ë¡œë“œëœ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ë¬¸ì œ ë°œìƒ**<br>
   âŒ **ì›ì¸** : **Docker Container ë‚´ë¶€ì— ì˜ìƒ íŒŒì¼ì´ ì €ì¥ë˜ì–´ ì„œë²„ ê²½ë¡œì—ì„œ í•´ë‹¹ íŒŒì¼ì„ ì°¾ì§€ ëª»í•¨**<br>
   âœ”ï¸ **í•´ê²°** : Docker ë¹Œë“œì‹œ íŒŒì¼ì˜ ì €ì¥ ì¥ì†Œë¥¼ ë„ì»¤ê°€ ìˆëŠ” ì„œë²„ì— ì—°ê²°! â†’ (`volumes`)ë¥¼ Docker Compose íŒŒì¼ì— ì¶”ê°€
   <pre>
     video-service:
       build:
         context: ./  # Root context for the build
         dockerfile: module-video/Dockerfile
       container_name: video_service
       ports:
         - "8083:8080"
       env_file:
         - .env
       depends_on:
         - mysql
         - redis
       volumes:
         - /var/www/uploads/adjustment:/var/www/uploads/adjustment   
   </pre>
   Dockerì—ì„œ íŒŒì¼ì„ ì €ì¥í•˜ëŠ” í•´ë‹¹ ê²½ë¡œëŠ” Docker ì™¸ë¶€ì˜ **ì„œë²„ì˜ ê²½ë¡œì™€ ì—°ê²°**ë˜ì–´ **íŒŒì¼ì´ ì›í•˜ëŠ” ì¥ì†Œì— ì €ì¥**ë˜ì—ˆìœ¼ë©° í•„ìš”í•œ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ìˆê²Œ ë¨   
</details>

<details>
<summary>Multi Module ë¹Œë“œì‹œ <strong>Main class name has not been configured and it could not be resolved from classpath</strong> ì˜¤ë¥˜ </summary>
   
   ğŸ’¡ **ë¬¸ì œ** : ìŠ¤í”„ë§ Multi Moduleë¥¼ ë¹Œë“œ í•  ê²½ìš° ë‚˜íƒ€ë‚˜ëŠ” Main Classë¥¼ ì°¾ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•¨ [Stackoverflow](https://stackoverflow.com/questions/78903577/main-class-name-has-not-been-configured-and-it-could-not-be-resolved-from-classp)<br>
   âŒ **ì›ì¸** : Docker ë¹Œë“œ ê³¼ì •ì—ì„œ root ê²½ë¡œì—ì„œ í•„ìš”í•œ íŒŒì¼ì„ ê°€ì ¸ì˜¤ëŠ” ê³¼ì •ì—ì„œ **settings.gradle**ì„ ì°¸ì¡°í•˜ëŠ”ë° ëª¨ë“  ëª¨ë“ˆì„ include í•˜ë„ë¡ ì‘ì„±ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— íŠ¹ì • ëª¨ë“ˆì— í•„ìš”í•˜ì§€ ì•Šì€ ëª¨ë“ˆë„ ë¹Œë“œë¥¼ ì‹œë„í•˜ë©´ì„œ ë‚˜íƒ€ë‚˜ëŠ” ë¬¸ì œ<br>
   ```
   //settings.gradle
   rootProject.name = 'adjustment'
   include 'module-user'
   include 'module-video'
   include 'module-common'
   include 'module-adjust'
   ```

   âœ”ï¸ **í•´ê²°** : ë¹Œë“œ ê³¼ì •ì— í•„ìš”í•œ ëª¨ë“ˆì˜ ì´ë¦„ë§Œ í¬í•¨í•œ **settings.gradle**ì„ ê° ëª¨ë“ˆì— ë°°ì¹˜í•˜ì—¬ í•„ìš”í•œ íŒŒì¼ë§Œ ë¹Œë“œí•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•¨ <br>
   ```
   //module-user/settings.gradle
   rootProject.name = 'adjustment'
   include 'module-user'
   include 'module-common'
   ```
   ë˜í•œ í•´ë‹¹ ì—…ë¡œë“œ ê³¼ì •ì„ ê° ëª¨ë“ˆì˜ DockerFileì— ì ìš©í•¨<br>
   ```
   # Base image
   FROM openjdk:17-jdk-slim
   
   # Set working directory
   WORKDIR /app
   
   # Copy Gradle files from the root context to the service context
   COPY gradlew /app/
   COPY gradle /app/gradle/
   COPY build.gradle /app/
   
   COPY module-common/build.gradle /app/module-common/
   COPY module-common/src /app/module-common/src
   
   COPY module-user/build.gradle /app/module-user/
   COPY module-user/src /app/module-user/src
   
   #Copy settings.gradle for module
   COPY module-user/settings.gradle /app/ 
   
   # Ensure gradlew is executable
   RUN chmod +x gradlew
   
   # Build the application
   RUN ./gradlew build -x test --stacktrace
   
   # Check the build output directory
   RUN ls -l module-user/build/libs/
   
   # Copy the built JAR file to /app.jar
   RUN cp module-user/build/libs/module-user-0.0.1-SNAPSHOT.jar /app.jar
   
   # Expose port
   EXPOSE 8080
   
   # Run the application
   CMD ["java", "-jar", "/app.jar"]
   ```
   ğŸ’¾ **Multi Module êµ¬ì„± ê³¼ì •ì„ ìƒì„¸í•˜ê²Œ ì„¤ëª…í•˜ê³  ë°”ë¡œ ì ìš©í•  ìˆ˜ ìˆë„ë¡ ë³„ë„ì˜ Git Repositoryë¥¼ ì‘ì„±í•¨** : [muti-module](https://github.com/seunghyeonlee9661/muti-module)
</details>

<details>
<summary><strong>Eureka Server - Spring Security ì¸ê°€ ìš”ì²­</strong></summary>
   
   ğŸ’¡ **ë¬¸ì œ** : Eureka Server í˜ì´ì§€ ì ‘ê·¼ ì‹œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ë©° ë¡œê·¸ì¸ì„ ìš”ì²­í•¨<br>
   âŒ **ì›ì¸** :
   1. Spring Securityê°€ root ê²½ë¡œì˜ ì˜ì¡´ì„±ì— ì¡´ì¬í•´ **ëª¨ë“  ëª¨ë“ˆì´ Spring Securityì˜ ì¸ê°€ë¥¼ ì²˜ë¦¬**í•˜ë„ë¡ ë˜ì–´ìˆì–´ Login í˜ì´ì§€ë¥¼ í˜¸ì¶œ<br>
   2. Eureka Serverì— ì—°ê²°ëœ clientì•±ì´ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚´<br>
   âœ”ï¸ **í•´ê²°** :
   1. ~~Eureka Serverì— ê¸°ë°˜ ëª¨ë“ˆì„ ì—°ê²°í•˜ê³  **Security Configì— ëŒ€í•´ ì ‘ê·¼ì„ í—ˆìš©í•¨**~~ -> ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±ì´ ìƒê¸°ë©° ë¹Œë“œ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¼<br>
   2. Eureka Moduleì˜ **application.propertiesì— Security ë³´ì•ˆ ì„¤ì •ì„ ë¬´ì‹œ**í•˜ë„ë¡ ì„¤ì •
   ```
   # Spring Security Exception
   eureka.security.enable-self-preservation=false
   management.endpoints.web.exposure.include=health,info
   ```   
</details>

<details>
<summary><strong>ConflictingBeanDefinitionException</strong> ì˜¤ë¥˜ ë°œìƒ</summary>
   
   ğŸ’¡ **ë¬¸ì œ** : í”„ë¡œì íŠ¸ ë¹Œë“œ ì‹œ **ConflictingBeanDefinitionException** ì˜¤ë¥˜ê°€ ë‚˜íƒ€ë‚˜ë©° ë¹Œë“œê°€ ì‹¤íŒ¨í•¨<br>
   âŒ **ì›ì¸** : Spring Projectì—ì„œ íŒŒì¼ì„ ì‚­ì œí•´ë„ Git Actionsì—ì„œ ê¸°ì¡´ íŒŒì¼ì„ ì‚­ì œí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì´ì „ íŒŒì¼ì´ ë‚¨ì•„ ì˜¤ë¥˜ë¥¼ ë°œìƒ ì‹œí‚´<br>
   âœ”ï¸ **í•´ê²°** :
   1. ~~deploy.ymlì—ì„œ ëª¨ë“  íŒŒì¼ì„ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ë‹¤ìš´ë¡œë“œ í•˜ë„ë¡ ì„¤ì •~~ -> í”„ë¡œì íŠ¸ ê·œëª¨, ë°°í¬ íšŸìˆ˜ì— ë”°ë¼ ì „ì†¡ ì‹œê°„ì´ ëŠ˜ì–´ë‚  ìˆ˜ ìˆê³  í•„ìš”í•œ íŒŒì¼ì„ ì‚­ì œí•  ê°€ëŠ¥ì„±ì´ ìˆìŒ
   2. `rsync --delete` ì˜µì…˜ì„ deploy.ymlì— ì¶”ê°€í•´ ì œê±°ëœ íŒŒì¼ë„ í•¨ê»˜ ë™ê¸°í™” í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•¨
   3. ë˜í•œ Docker Composer ë¹Œë“œ ì‹œ **ë³€ê²½ ê°ì§€ë¥¼ í†µí•´ ìˆ˜ì • ì‚¬í•­ë§Œ ìƒˆë¡œ ë¹Œë“œí•  ìˆ˜ ìˆë„ë¡ ê¸°ëŠ¥ì„ ì¶”ê°€**í•¨
   ```
   # deploy.yml
   name: Deploy to Ubuntu Server
   
   on:
     push:
       branches:
         - main
         - develop
   
   jobs:
     deploy:
       runs-on: ubuntu-latest
   
       steps:
         - name: Checkout code
           uses: actions/checkout@v3
           with:
             fetch-depth: 2  # ë³€ê²½ ê°ì§€ë¥¼ ìœ„í•œ ì´ì „ íŒŒì¼ í™•ì¸
   
         - name: Set up SSH
           uses: webfactory/ssh-agent@v0.7.0
           with:
             ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}
   
         - name: Copy files via SSH with file deletion # í•„ìš”í•œ íŒŒì¼ì„ Git Repositoryì—ì„œ ë°›ì•„ì˜¤ë˜ ì‚­ì œëœ íŒŒì¼ë„ ì ìš©í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•¨
           run: |
             rsync -avz --delete -e "ssh -o StrictHostKeyChecking=no" ./ ${{ secrets.USER }}@${{ secrets.HOST }}:/home/leesh/Sparta/AdjustmentService
   
         - name: Install Docker Compose
           run: |
             ssh -o StrictHostKeyChecking=no ${{ secrets.USER }}@${{ secrets.HOST }} 'bash -s' << 'EOF'
             curl -L "https://github.com/docker/compose/releases/download/v2.6.1/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
             chmod +x /usr/local/bin/docker-compose
             EOF
   
         - name: Deploy with Docker Compose
           run: |
             ssh -o StrictHostKeyChecking=no ${{ secrets.USER }}@${{ secrets.HOST }} << 'EOF'
             cd /home/leesh/Sparta/AdjustmentService
             
             # í™˜ê²½ ë³€ìˆ˜ ì €ì¥
             echo "MYSQL_ROOT_PASSWORD=${{ secrets.MYSQL_ROOT_PASSWORD }}" > .env
             echo "MYSQL_DATABASE=${{ secrets.MYSQL_DATABASE }}" >> .env
             echo "MYSQL_USER=${{ secrets.MYSQL_USER }}" >> .env
             echo "MYSQL_PASSWORD=${{ secrets.MYSQL_PASSWORD }}" >> .env
             echo "REDIS_HOST=${{ secrets.REDIS_HOST }}" >> .env
             echo "REDIS_PORT=${{ secrets.REDIS_PORT }}" >> .env
             echo "JWT_SECRET_KEY=${{ secrets.JWT_SECRET_KEY }}" >> .env
             echo "KAKAO_CLIENT_ID=${{ secrets.KAKAO_CLIENT_ID }}" >> .env
             echo "KAKAO_REDIRECT_URI=${{ secrets.KAKAO_REDIRECT_URI }}" >> .env
             
             # Detect which modules changed
             changed_modules=$(git diff --name-only HEAD^ HEAD)
   
             # Build all services if module-common changed
             if echo "$changed_modules" | grep -q '^module-common/'; then
               echo "Changes detected in common module"
               docker-compose build user-service
               docker-compose build video-service
               docker-compose build adjust-service
               docker-compose build batch-service
               docker-compose build eureka-server
               docker-compose build common
             else
               # Build only if specific directories have changed
               if echo "$changed_modules" | grep -q '^module-user/'; then
                 echo "Changes detected in user-service"
                 docker-compose build user-service
               fi
   
               if echo "$changed_modules" | grep -q '^module-video/'; then
                 echo "Changes detected in video-service"
                 docker-compose build video-service
               fi
   
               if echo "$changed_modules" | grep -q '^module-adjust/'; then
                 echo "Changes detected in adjust-service"
                 docker-compose build adjust-service
               fi
             
               if echo "$changed_modules" | grep -q '^module-batch/'; then
                 echo "Changes detected in batch-service"
                 docker-compose build batch-service
               fi
             
               if echo "$changed_modules" | grep -q '^module-eureka/'; then
                 echo "Changes detected in eureka-service"
                 docker-compose build eureka-server
               fi
             fi
             
             docker-compose up -d
             EOF
   ```
</details>

<details>
<summary><strong>Eureka static resource - 404 Error</strong></summary>
   
   ğŸ’¡ **ë¬¸ì œ** : Eureka í˜ì´ì§€ì—ì„œ jsì™€ cssì™€ ê°™ì€ Static Resourceë¥¼ ì°¾ì§€ ëª»í•˜ëŠ” ë¬¸ì œ<br>
   âŒ **ì›ì¸** : Nginxê°€ Eureka ì„œë²„ì— í”„ë¡ì‹œë¥¼ ì ìš©í•˜ëŠ”ë° **Static Resourceê°€ ë‹¤ë¥¸ ê²½ë¡œë¡œ ì—°ê²°**ë˜ì–´ ìˆì–´ ì •ìƒì ìœ¼ë¡œ í˜ì´ì§€ê°€ ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ<br>
   âœ”ï¸ **í•´ê²°** : Nginxì— **Static Resourceì— ëŒ€í•œ ì¶”ê°€ì ì¸ í”„ë¡ì‹œ ì„¤ì •**ì„ ë„£ìŒ

   ```
    location /adjustment/eureka/ {
        proxy_pass http://localhost:8761/;  # Eureka í”„ë¡ì‹œ
     }

    location /eureka/ { 
        proxy_pass http://localhost:8761/eureka/; # # Eureka Resource í”„ë¡ì‹œ
    }
   ```
</details>

<details>
<summary><strong>ë°°ì¹˜ ì‘ì—… ìµœì í™”</strong></summary>
   
   ğŸ’¡ **ë¬¸ì œ** : ê¸°ì¡´ ì •ì‚° ì²˜ë¦¬ ì‘ì—…ì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹ìœ¼ë¡œ ì§„í–‰í–ˆìœ¼ë‚˜, ì†Œìš” ì‹œê°„ì´ ì•½ 58ë¶„ìœ¼ë¡œ ì˜¤ë˜ ê±¸ë¦¼<br>
   âŒ **ì›ì¸** : ì‘ì—… ìì²´ì˜ ë³µì¡í•¨ìœ¼ë¡œ ë°ì´í„° ìˆ˜ê°€ ì¦ê°€í•˜ë©´ì„œ Batch ì‘ì—…ì˜ ì†Œìš”ì‹œê°„ì´ ê¸‰ì¦í•¨<br>
   âœ”ï¸ **í•´ê²°** : **ë©€í‹° ìŠ¤ë ˆë“œë¥¼ ì ìš©**í•´ 10ê°œ ìŠ¤ë ˆë“œê°€ ë™ì‹œ ì²˜ë¦¬í•˜ë„ë¡ ì¡°ì • (ì†Œìš”ì‹œê°„ 28ë¶„)  
   
   ```java
   import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

@Transactional
public void setDailySummaryWithThreads() {
    logger.info("ë©€í‹°ìŠ¤ë ˆë“œ ì‘ì—… ì‹œì‘");

    LocalDateTime todayStart = LocalDate.now().atStartOfDay();  // ì˜¤ëŠ˜ 0ì‹œ 0ë¶„ 0ì´ˆ
    LocalDateTime yesterdayStart = todayStart.minusDays(1);  // ì–´ì œ 0ì‹œ 0ë¶„ 0ì´ˆ
    LocalDateTime weekStart = todayStart.minusWeeks(1);  // 1ì£¼ì¼ ì „ (ì €ë²ˆì£¼ ì‹œì‘)
    LocalDateTime monthStart = todayStart.minusMonths(1);  // í•œ ë‹¬ ì „ (ì§€ë‚œë‹¬ ì‹œì‘)

    logger.info("ì˜¤ëŠ˜ ì‹œì‘ ì‹œê°„: {}", todayStart);
    logger.info("ì–´ì œ ì‹œì‘ ì‹œê°„: {}", yesterdayStart);
    logger.info("1ì£¼ì¼ ì „ ì‹œì‘ ì‹œê°„: {}", weekStart);
    logger.info("1ë‹¬ ì „ ì‹œì‘ ì‹œê°„: {}", monthStart);

    List<Video> videos = videoRepository.findAll();
    logger.info("ì´ {} ê°œì˜ ë¹„ë””ì˜¤ì— ëŒ€í•´ ì •ì‚°ì„ ì§„í–‰í•©ë‹ˆë‹¤.", videos.size());

    ExecutorService executorService = Executors.newFixedThreadPool(10);  // ìŠ¤ë ˆë“œ í’€ í¬ê¸° ì„¤ì • (ì—¬ê¸°ì„œëŠ” 10ê°œ)

    for (Video video : videos) {
        executorService.submit(() -> {
            logger.info("ë¹„ë””ì˜¤ ID: {} ì²˜ë¦¬ ì‹œì‘ (ìŠ¤ë ˆë“œ ID: {})", video.getId(), Thread.currentThread().getId());

            long videoDailyViewCount = 0L;
            long videoWeeklyViewCount = 0L;
            long videoMonthlyViewCount = 0L;
            long videoDailyProfit = 0L;
            long videoWeeklyProfit = 0L;
            long videoMonthlyProfit = 0L;
            long adDailyViewCount = 0L;
            long adWeeklyViewCount = 0L;
            long adMonthlyViewCount = 0L;
            long adDailyProfit = 0L;
            long adWeeklyProfit = 0L;
            long adMonthlyProfit = 0L;

            Optional<DailyRecord> todayRecordOptional = dailyRecordRepository.findByDateAndVideo(Timestamp.valueOf(todayStart), video);
            Optional<DailyRecord> yesterdayRecordOptional = dailyRecordRepository.findByDateAndVideo(Timestamp.valueOf(yesterdayStart), video);

            if (todayRecordOptional.isPresent()) {
                DailyRecord todayRecord = todayRecordOptional.get();
                if (yesterdayRecordOptional.isPresent()) {
                    DailyRecord yesterdayRecord = yesterdayRecordOptional.get();
                    videoDailyViewCount = todayRecord.getTotalVideoViews() - yesterdayRecord.getTotalVideoViews();
                    adDailyViewCount = todayRecord.getTotalAdViews() - yesterdayRecord.getTotalAdViews();
                    logger.info("ë¹„ë””ì˜¤ {}ì˜ ì¼ê°„ ì¡°íšŒìˆ˜ ì°¨ì´: {}", video.getId(), videoDailyViewCount);
                    logger.info("ê´‘ê³  {}ì˜ ì¼ê°„ ì¡°íšŒìˆ˜ ì°¨ì´: {}", video.getId(), adDailyViewCount);
                }

                Optional<DailyRecord> prevWeekRecord = dailyRecordRepository.findByDateAndVideo(Timestamp.valueOf(weekStart), video);
                if (prevWeekRecord.isPresent()) {
                    DailyRecord prevRecord = prevWeekRecord.get();
                    videoWeeklyViewCount = todayRecord.getTotalVideoViews() - prevRecord.getTotalVideoViews();
                    adWeeklyViewCount = todayRecord.getTotalAdViews() - prevRecord.getTotalAdViews();
                    logger.info("ë¹„ë””ì˜¤ {}ì˜ ì£¼ê°„ ì¡°íšŒìˆ˜ ì°¨ì´: {}", video.getId(), videoWeeklyViewCount);
                    logger.info("ê´‘ê³  {}ì˜ ì£¼ê°„ ì¡°íšŒìˆ˜ ì°¨ì´: {}", video.getId(), adWeeklyViewCount);
                }

                Optional<DailyRecord> prevMonthRecord = dailyRecordRepository.findByDateAndVideo(Timestamp.valueOf(monthStart), video);
                if (prevMonthRecord.isPresent()) {
                    DailyRecord prevMonthRecordValue = prevMonthRecord.get();
                    videoMonthlyViewCount = todayRecord.getTotalVideoViews() - prevMonthRecordValue.getTotalVideoViews();
                    adMonthlyViewCount = todayRecord.getTotalAdViews() - prevMonthRecordValue.getTotalAdViews();
                    logger.info("ë¹„ë””ì˜¤ {}ì˜ ì›”ê°„ ì¡°íšŒìˆ˜ ì°¨ì´: {}", video.getId(), videoMonthlyViewCount);
                    logger.info("ê´‘ê³  {}ì˜ ì›”ê°„ ì¡°íšŒìˆ˜ ì°¨ì´: {}", video.getId(), adMonthlyViewCount);
                }
            }

            // ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì •ì‚°ì´ë©´ ì—…ë°ì´íŠ¸
            Optional<DailySummary> existingSummary = dailySummaryRepository.findByDateAndVideo(Timestamp.valueOf(todayStart), video);
            if (existingSummary.isPresent()) {
                DailySummary summary = existingSummary.get();
                summary.setVideoDailyViewCount(videoDailyViewCount);
                summary.setVideoWeeklyViewCount(videoWeeklyViewCount);
                summary.setVideoMonthlyViewCount(videoMonthlyViewCount);
                summary.setVideoDailyProfit(videoDailyProfit);
                summary.setVideoWeeklyProfit(videoWeeklyProfit);
                summary.setVideoMonthlyProfit(videoMonthlyProfit);
                summary.setAdDailyViewCount(adDailyViewCount);
                summary.setAdWeeklyViewCount(adWeeklyViewCount);
                summary.setAdMonthlyViewCount(adMonthlyViewCount);
                summary.setAdDailyProfit(adDailyProfit);
                summary.setAdWeeklyProfit(adWeeklyProfit);
                summary.setAdMonthlyProfit(adMonthlyProfit);
                logger.info("ë¹„ë””ì˜¤ {}ì˜ ê¸°ì¡´ ì •ì‚° ì—…ë°ì´íŠ¸", video.getId());
            } else {
                // ìƒˆë¡œìš´ ì •ì‚° ê¸°ë¡ì„ ì¶”ê°€
                DailySummary newSummary = new DailySummary(Timestamp.valueOf(todayStart), video,
                        videoDailyViewCount, videoWeeklyViewCount, videoMonthlyViewCount,
                        adDailyViewCount, adWeeklyViewCount, adMonthlyViewCount);
                dailySummaryRepository.save(newSummary);
                logger.info("ë¹„ë””ì˜¤ {}ì˜ ìƒˆë¡œìš´ ì •ì‚° ê¸°ë¡ ì¶”ê°€", video.getId());
            }

            logger.info("ë¹„ë””ì˜¤ ID: {} ì²˜ë¦¬ ì™„ë£Œ (ìŠ¤ë ˆë“œ ID: {})", video.getId(), Thread.currentThread().getId());
        });
    }

    executorService.shutdown();  // ëª¨ë“  ì‘ì—…ì´ ëë‚œ í›„ ExecutorService ì¢…ë£Œ
    logger.info("ë©€í‹°ìŠ¤ë ˆë“œ ì‘ì—… ì¢…ë£Œ");
}

   ```
</details>


## ğŸ”— **ì„±ëŠ¥ ì¸¡ì •**

### ê°œìš”

- **ì¸¡ì • ëª©í‘œ** : `Batch Process`ë¥¼ í†µí•´ ë¯¸ë¦¬ ìƒì„±ëœ ì •ì‚°ì˜ **ì‘ë‹µ ì†ë„ íš¨ìœ¨ ì‹¤í—˜**
- **ì¸¡ì • ëŒ€ìƒ** : ì‚¬ìš©ìì˜ ì˜ìƒê³¼ ê´‘ê³ ì— ëŒ€í•œ **ì¡°íšŒìˆ˜ì™€ ì •ì‚° ê¸ˆì•¡ í˜¸ì¶œ** ê¸°ëŠ¥
- **ì¸¡ì • ë„êµ¬** : `JMeter`

### ì¸¡ì • ê³¼ì •

1. **`Python`ê¸°ë°˜ì˜ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±**
    <details>
    <summary>Python ì½”ë“œ</summary>
    
    ```python
    import pymysql
    import random
    import faker
    from datetime import datetime, timedelta
    import pytz  # íƒ€ì„ì¡´ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
    
    # MySQL ì—°ê²°
    connection = pymysql.connect(
        host='**',  # MySQL ì»¨í…Œì´ë„ˆì˜ IP ì£¼ì†Œ
        user='**',        # MySQL ì‚¬ìš©ì
        password='**',    # MySQL ë¹„ë°€ë²ˆí˜¸
        database='**'  # ì‚¬ìš©í•˜ë ¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
    )
    
    # Faker ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ëœë¤ ë°ì´í„° ìƒì„±
    fake = faker.Faker()
    
    # KST (Asia/Seoul) íƒ€ì„ì¡´ ì„¤ì •
    kst = pytz.timezone('Asia/Seoul')
    
    def generate_random_video_sql(user_id):
        # ëœë¤ ì œëª©, URL, ì¸ë„¤ì¼ ìƒì„±
        title = fake.sentence(nb_words=5)  # 5ê°œì˜ ë‹¨ì–´ë¡œ ì´ë£¨ì–´ì§„ ëœë¤ ë¬¸ì¥
        url = fake.url()
        thumbnail = fake.image_url()
        duration = random.randint(10, 200)  # 10ì´ˆì—ì„œ 200ì´ˆ ì‚¬ì´ì˜ ëœë¤ ì˜ìƒ ê¸¸ì´
    
        # ëœë¤ìœ¼ë¡œ 1ë…„ ì´ë‚´ì˜ ë‚ ì§œ ìƒì„±
        today = datetime.today()
        random_days = random.randint(0, 365)  # 0ì¼ë¶€í„° 365ì¼ê¹Œì§€ ëœë¤
        random_date = today - timedelta(days=random_days)
    
        # ì „ë‚  15ì‹œë¡œ ì‹œê°„ ì„¤ì •
        random_date = random_date.replace(hour=15, minute=0, second=0, microsecond=0)
    
        # KST íƒ€ì„ì¡´ì— ë§ê²Œ ë¡œì»¬ë¼ì´ì¦ˆ
        random_date_kst = kst.localize(random_date)
        registration_date = random_date_kst.strftime('%Y-%m-%d %H:%M:%S')
    
        # SQL ìƒì„±
        sql = f"""
            INSERT INTO video (url, thumbnail, user_id, title, view_count, registration_date, duration)
            VALUES ('{url}', '{thumbnail}', {user_id}, '{title}', 0, '{registration_date}', {duration});
        """
        return sql
    
    def generate_random_adlist_sql(video_id):
        # ê´‘ê³  IDëŠ” 2008ë¶€í„° 2108ê¹Œì§€ ë²”ìœ„ì—ì„œ ëœë¤ìœ¼ë¡œ ì„ íƒ
        ad_ids = random.sample(range(2008, 2107), random.randint(1, 5))  # 1ê°œì—ì„œ 5ê°œ ì‚¬ì´ì˜ ëœë¤ ê´‘ê³  ì„ íƒ
    
        # AdList SQL ìƒì„±
        adlist_sqls = []
        for ad_id in ad_ids:
            adlist_sql = f"""
                INSERT INTO ad_list (video_id, ad_id, view_count)
                VALUES ({video_id}, {ad_id}, 0);
            """
            adlist_sqls.append(adlist_sql)
    
        return adlist_sqls
    
    def generate_daily_record_sql(video_id, start_date, today):
        # start_dateë¶€í„° ì˜¤ëŠ˜ê¹Œì§€ í•˜ë£¨ì”© ì¦ê°€í•˜ëŠ” ë°ì´í„°ë¥¼ ìƒì„±
        daily_records = []
    
        total_video_views = 0
        total_ad_views = 0
    
        current_date = start_date
        while current_date <= today:
            # ì „ë‚  15ì‹œë¡œ ì„¤ì •
            current_date = current_date.replace(hour=15, minute=0, second=0, microsecond=0)
    
            # ì˜ìƒ ì¡°íšŒìˆ˜ì™€ ê´‘ê³  ì¡°íšŒìˆ˜ ëœë¤ ì¦ê°€
            daily_video_views = random.randint(100, 1000)  # 100 ~ 1000 ì‚¬ì´ì˜ ëœë¤ ì¦ê°€
            daily_ad_views = random.randint(10, 100)  # 10 ~ 100 ì‚¬ì´ì˜ ëœë¤ ì¦ê°€
    
            # ì´í•© ì—…ë°ì´íŠ¸
            total_video_views += daily_video_views
            total_ad_views += daily_ad_views
    
            # DailyRecord SQL ìƒì„±
            daily_record_sql = f"""
                INSERT INTO daily_record (date, video_id, total_video_views, total_ad_views)
                VALUES ('{current_date.strftime('%Y-%m-%d %H:%M:%S')}', {video_id}, {total_video_views}, {total_ad_views});
            """
            daily_records.append(daily_record_sql)
    
            # í•˜ë£¨ì”© ì¦ê°€
            current_date += timedelta(days=1)
    
        return daily_records
    
    try:
        with connection.cursor() as cursor:
            # ì‚¬ìš©ì IDëŠ” 1
            user_id = 1
    
            # 50ê°œì˜ ì˜ìƒ ë°ì´í„°ë¥¼ ìƒì„±í•˜ê³  ê´€ê³„ í…Œì´ë¸”ì— ì¶”ê°€
            for _ in range(47):
                # ì˜ìƒ ë°ì´í„° ìƒì„± ë° ì‚½ì…
                video_sql = generate_random_video_sql(user_id)
                cursor.execute(video_sql)
                # ìƒì„±ëœ ì˜ìƒì˜ ID ê°€ì ¸ì˜¤ê¸°
                video_id = cursor.lastrowid
    
                # ìƒì„±ëœ ì˜ìƒì— ëŒ€í•´ ì¼ìë³„ DailyRecord ë°ì´í„° ì‚½ì…
                start_date = datetime.strptime("2023-11-01", "%Y-%m-%d")  # ì˜ˆì‹œë¡œ 11ì›” 1ì¼ ì‹œì‘
                today = datetime.today()  # ì˜¤ëŠ˜ ë‚ ì§œ
                daily_record_sqls = generate_daily_record_sql(video_id, start_date, today)
                for daily_record_sql in daily_record_sqls:
                    cursor.execute(daily_record_sql)
    
                # ê´‘ê³ -ì˜ìƒ ê´€ê³„ ì‚½ì…
                adlist_sqls = generate_random_adlist_sql(video_id)
                for adlist_sql in adlist_sqls:
                    cursor.execute(adlist_sql)
    
                print(f"Video {video_id} added successfully!")
    
            connection.commit()  # ì»¤ë°‹í•˜ì—¬ ë³€ê²½ ì‚¬í•­ ë°˜ì˜
    finally:
        connection.close()
    ```
      </details>

   - **ì˜ìƒ ë°ì´í„° ìƒì„±**
     - ì˜ìƒì˜ ì œëª©, URL, ì¸ë„¤ì¼ì„ ëœë¤ìœ¼ë¡œ ìƒì„±
     - ì˜ìƒ ê¸¸ì´ëŠ” 10ì´ˆì—ì„œ 200ì´ˆ ì‚¬ì´ì˜ ëœë¤ ê°’ìœ¼ë¡œ ì„¤ì •
     - ë“±ë¡ì¼ì€ ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ê¸°ì¤€ìœ¼ë¡œ 0ì¼ë¶€í„° 365ì¼ ì‚¬ì´ì˜ ëœë¤ ë‚ ì§œë¡œ ì„¤ì •
   - **ê´‘ê³ -ì˜ìƒ ê´€ê³„ ë°ì´í„° ìƒì„±**
     - ê´‘ê³  IDë¥¼ 100ê°œì˜ ì‹¤ì œ ê´‘ê³  ë°ì´í„° ì¤‘ 1ê°œì—ì„œ 5ê°œ ì‚¬ì´ì˜ ëœë¤ ê°’ìœ¼ë¡œ ì„¤ì •
   - **ì¼ë³„ ê¸°ë¡ ë°ì´í„° ìƒì„±**
     - ì˜ìƒ ìƒì„±ì¼ë¶€í„° ì˜¤ëŠ˜ê¹Œì§€ í•˜ë£¨ì”© ì¦ê°€í•˜ëŠ” ë°ì´í„°ë¥¼ ìƒì„±
     - ì˜ìƒ ì¡°íšŒìˆ˜ëŠ” ê° ë‚ ì§œë§ˆë‹¤ 100ì—ì„œ 1000 ì‚¬ì´ì˜ ëœë¤ê°’ìœ¼ë¡œ ì¦ê°€
     - ê´‘ê³  ì¡°íšŒìˆ˜ëŠ” ê° ë‚ ì§œë§ˆë‹¤ 10ì—ì„œ 100 ì‚¬ì´ì˜ ëœë¤ê°’ìœ¼ë¡œ ì¦ê°€

3. **ë°°ì¹˜ ì‘ì—… ìˆ˜í–‰**
   - ì˜¤ëŠ˜ ë‚ ì§œë¡œ ë°°ì¹˜ ì‘ì—…ì„ ì‹¤í–‰í•˜ì—¬, ë°ì´í„°ì˜ ë°°ì¹˜ ê²°ê³¼ë¥¼ ì²˜ë¦¬
   - ì‹¤ì œ ì‘ì—…ì€ Batch ìŠ¤ì¼€ì¤„ëŸ¬ë¡œ ë§¤ì¼ ì§„í–‰ë¨

4. **ì‹¤í—˜ í™˜ê²½ ì„¤ì •**
   - JMeterì—ì„œ ì—°ê²° í…ŒìŠ¤íŠ¸ ë° ë°˜í™˜ ê²°ê³¼ ê²€ì¦

5. **ì‹¤í—˜ ì§„í–‰**
   - **ë‹¨ì¼ ì‚¬ìš©ì ì‹¤í—˜** (1ëª…ì´ 100ë²ˆ ë°˜ë³µ)
     - **ì¦‰ì‹œ ë¡œë”©**ì„ í†µí•´ ìš”ì²­ì„ ì§„í–‰í•˜ê³  ì¸¡ì •
     - **ë°°ì¹˜ëœ ê²°ê³¼ ë¡œë”©**ì„ í†µí•´ ìš”ì²­ì„ ì§„í–‰í•˜ê³  ì¸¡ì •
   - **ë‹¤ì¤‘ ì‚¬ìš©ì ì‹¤í—˜** (100ëª…ì´ 1ë²ˆì”© ë°˜ë³µ)
     - **ì¦‰ì‹œ ë¡œë”©**ì„ í†µí•´ ìš”ì²­ì„ ì§„í–‰í•˜ê³  ì¸¡ì •
     - **ë°°ì¹˜ëœ ê²°ê³¼ ë¡œë”©**ì„ í†µí•´ ìš”ì²­ì„ ì§„í–‰í•˜ê³  ì¸¡ì •
   - **ë°ì´í„° ìˆ˜ í™•ì¥**
     - **50ê°œ** ë°ì´í„°ì—ì„œ ì‹œì‘í•˜ì—¬, **100ê°œ**, **1000ê°œ**, **10000ê°œ**ë¡œ ë°ì´í„° ìˆ˜ë¥¼ ì¦ê°€

6. **ê²°ê³¼ ë¶„ì„**
   - ë‹¨ì¼ ì‚¬ìš©ì ë° ë‹¤ì¤‘ ì‚¬ìš©ì ê°ê°ì˜ **ì‘ë‹µ ì‹œê°„**ì„ ë¹„êµí•˜ì—¬ ë°°ì¹˜ ì²˜ë¦¬ ë°©ì‹ì´ ì„±ëŠ¥ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ë¶„ì„
   - ê° ë°ì´í„° ìˆ˜ì— ë”°ë¥¸ **ì‘ë‹µ ì‹œê°„**ì„ ë¶„ì„í•˜ì—¬, ë°°ì¹˜ ì²˜ë¦¬ì˜ íš¨ê³¼ë¥¼ ì‹œê°ì ìœ¼ë¡œ í™•ì¸

### ì¸¡ì • ê²°ê³¼

- **ë°ì´í„° ìˆ˜ 50ê°œ**
  - **ë‹¨ì¼ ì‚¬ìš©ì**
    - **ì¦‰ì‹œ**: í‰ê·  ì‘ë‹µ ì‹œê°„ 56ms, ìµœì†Œ 48ms, ìµœëŒ€ 104ms
    - **ë°°ì¹˜**: í‰ê·  ì‘ë‹µ ì‹œê°„ 33ms, ìµœì†Œ 23ms, ìµœëŒ€ 110ms
  - **ë‹¤ì¤‘ ì‚¬ìš©ì**
    - **ì¦‰ì‹œ**: í‰ê·  ì‘ë‹µ ì‹œê°„ 796ms, ìµœì†Œ 139ms, ìµœëŒ€ 2255ms
    - **ë°°ì¹˜**: í‰ê·  ì‘ë‹µ ì‹œê°„ 568ms, ìµœì†Œ 32ms, ìµœëŒ€ 1603ms

- **ë°ì´í„° ìˆ˜ 100ê°œ**
  - **ë‹¨ì¼ ì‚¬ìš©ì**
    - **ì¦‰ì‹œ**: í‰ê·  ì‘ë‹µ ì‹œê°„ 97ms, ìµœì†Œ 87ms, ìµœëŒ€ 150ms
    - **ë°°ì¹˜**: í‰ê·  ì‘ë‹µ ì‹œê°„ 46ms, ìµœì†Œ 36ms, ìµœëŒ€ 166ms
  - **ë‹¤ì¤‘ ì‚¬ìš©ì**
    - **ì¦‰ì‹œ**: í‰ê·  ì‘ë‹µ ì‹œê°„ 1622ms, ìµœì†Œ 286ms, ìµœëŒ€ 4131ms
    - **ë°°ì¹˜**: í‰ê·  ì‘ë‹µ ì‹œê°„ 1321ms, ìµœì†Œ 108ms, ìµœëŒ€ 4113ms

- **ë°ì´í„° ìˆ˜ 1000ê°œ**
  - **ë‹¨ì¼ ì‚¬ìš©ì**
    - **ì¦‰ì‹œ**: í‰ê·  ì‘ë‹µ ì‹œê°„ 201ms, ìµœì†Œ 173ms, ìµœëŒ€ 318ms
    - **ë°°ì¹˜**: í‰ê·  ì‘ë‹µ ì‹œê°„ 29ms, ìµœì†Œ 17ms, ìµœëŒ€ 120ms
  - **ë‹¤ì¤‘ ì‚¬ìš©ì**
    - **ì¦‰ì‹œ**: í‰ê·  ì‘ë‹µ ì‹œê°„ 2735ms, ìµœì†Œ 642ms, ìµœëŒ€ 5903ms
    - **ë°°ì¹˜**: í‰ê·  ì‘ë‹µ ì‹œê°„ 2067ms, ìµœì†Œ 144ms, ìµœëŒ€ 5965ms

- **ë°ì´í„° ìˆ˜ 10000ê°œ**
  - **ë‹¨ì¼ ì‚¬ìš©ì**
    - **ì¦‰ì‹œ**: í‰ê·  ì‘ë‹µ ì‹œê°„ 781ms, ìµœì†Œ 656ms, ìµœëŒ€ 1459ms
    - **ë°°ì¹˜**: í‰ê·  ì‘ë‹µ ì‹œê°„ 78ms, ìµœì†Œ 64ms, ìµœëŒ€ 208ms
  - **ë‹¤ì¤‘ ì‚¬ìš©ì**
    - **ì¦‰ì‹œ**: í‰ê·  ì‘ë‹µ ì‹œê°„ 13472ms, ìµœì†Œ 2087ms, ìµœëŒ€ 11962ms
    - **ë°°ì¹˜**: í‰ê·  ì‘ë‹µ ì‹œê°„ 6541ms, ìµœì†Œ 546ms, ìµœëŒ€ 11612ms

### ì„±ëŠ¥ í–¥ìƒ ë¶„ì„

- **ë‹¨ì¼ ì‚¬ìš©ì ì‹¤í—˜**
  - ë°ì´í„° ìˆ˜ê°€ ì ì„ìˆ˜ë¡ **ì¦‰ì‹œ ì²˜ë¦¬**ì™€ **ë°°ì¹˜ ì²˜ë¦¬**ì˜ ì°¨ì´ê°€ í¬ì§€ ì•Šì§€ë§Œ, ë°ì´í„° ìˆ˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡ **ë°°ì¹˜ ì²˜ë¦¬**ì˜ ì„±ëŠ¥ í–¥ìƒ íš¨ê³¼ê°€ ë‘ë“œëŸ¬ì§.
  - **1000ê°œ ì´ìƒ**ì˜ ë°ì´í„°ì—ì„œ ë°°ì¹˜ ì²˜ë¦¬ ë°©ì‹ì´ **ì‘ë‹µ ì‹œê°„**ì„ í¬ê²Œ ë‹¨ì¶•ì‹œí‚´.
  - **10000ê°œ ë°ì´í„°**ì—ì„œëŠ” ë°°ì¹˜ ì²˜ë¦¬ ë°©ì‹ì´ **ì‘ë‹µ ì‹œê°„**ì„ **85% ì´ìƒ** í–¥ìƒì‹œí‚´.

- **ë‹¤ì¤‘ ì‚¬ìš©ì ì‹¤í—˜**
  - ë‹¤ì¤‘ ì‚¬ìš©ì í™˜ê²½ì—ì„œëŠ” ë°°ì¹˜ ì²˜ë¦¬ì˜ íš¨ê³¼ê°€ ë” í¬ê²Œ ë‚˜íƒ€ë‚˜ë©°, íŠ¹íˆ **ì‘ë‹µ ì‹œê°„**ì—ì„œ **30% ì´ìƒ** í–¥ìƒì´ ë°œìƒ.
  - ë°°ì¹˜ ì²˜ë¦¬ ë°©ì‹ì€ ëŒ€ëŸ‰ ë°ì´í„° ìš”ì²­ ì‹œ ì„±ëŠ¥ì„ í¬ê²Œ í–¥ìƒì‹œí‚¤ê³ , **ì„œë²„ ìì›**ì„ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤Œ.

### ê²°ë¡ 

ë°°ì¹˜ ì²˜ë¦¬ ë°©ì‹ì€ íŠ¹íˆ ë°ì´í„° ì–‘ì´ ë§ì„ ê²½ìš° ì„±ëŠ¥ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ì‹¤í—˜ ê²°ê³¼, **ì¦‰ì‹œ ë¡œë”©**ë³´ë‹¤ **ë°°ì¹˜ëœ ê²°ê³¼ ë¡œë”©**ì´ **ì‘ë‹µ ì†ë„** ë©´ì—ì„œ ìœ ë¦¬í•˜ë©°, ë°ì´í„° ìˆ˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ê·¸ ì°¨ì´ëŠ” ë”ìš± ë‘ë“œëŸ¬ì§‘ë‹ˆë‹¤. ë‹¤ì¤‘ ì‚¬ìš©ì í™˜ê²½ì—ì„œë„ ë°°ì¹˜ ì²˜ë¦¬ì˜ ì´ì ì´ í™•ì—°íˆ ë‚˜íƒ€ë‚˜ë©°, ì„œë²„ ì„±ëŠ¥ê³¼ ì‚¬ìš©ì ê²½í—˜ì„ ìµœì í™”í•˜ëŠ” ë° ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.
